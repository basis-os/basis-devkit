---
# IMPORT TRANSACTIONS 
node_file: import_transactions.py
node_type: python
description: > 
  This file imports transactions 
  from the interwebs
outputs:
  - table('import_transactions.raw_transactions')
  - stream('import_transactions.new_transactions')
parameter:
  api_key: ${{ secrets.salesforce_api_key }}
  base_url: "baseurl.com/endpoint"
---
# CLEAN TRANSACTIONS 
node_file: clean_transactions.sql
node_type: sql
description: > 
  This file takes transactions and 
  cleans them
outputs:
  - table('self.staging_transactions')
---
# Node1 in subgraph
node_file: subgraph1.sql
node_type: sql
description: >
  This is a first step in the subgraph 
outputs:
  - table('self.step1')
---
# Node2 in subgraph
node_file: subgraph2.sql
node_type: sql
description: >
  This is the second step in the subgraph, no outputs or inputs exposed
outputs:
  - table('self.step2')
---
# Node3 in subgraph
node_file: subgraph3.sql
node_type: sql
description: >
  This is the second step in the subgraph, no outputs or inputs exposed
outputs:
  - table('self.step3')
---
# EXPORT TO CRM
node_file: export_to_crm.py
node_type: python
description: >
  This is the second step in the subgraph, no outputs or inputs exposed
outputs:
  - table: contacts_exported_to_crm
parameters:
  - api_key: asdf
  - base_url: asdf