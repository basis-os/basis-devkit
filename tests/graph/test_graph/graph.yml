name: test_graph
# exposed_interface:
#   exposed_inputs:
#     - name: myinput
#       proxy_for: testpy
#   exposed_outputs:
#     - name: myoutput
#       proxy_for: test
#     - name: other_output
#       proxy_for: subgraph1.test_sub
#   exposed_parameters:
#     - name: myparam
#       datatype: number
#       default: 1
nodes:
  - node_from_python_file: test.py
    node_parameters:
      myval: 1
  - node_from_python_file: test.py
  - node_from_python_file: test.py
  - node_from_python: basis_stripe.stripe_importer
    node_parameters:
      api_key: ${{ secrets.salesforce_api_key }}
      objects:
        - charges
        - refunds
    output_names:
      - rename_output: charges
        to: my_charges
  - node_from_sql_file: test.sql
    input_connections:
      - connect_table: subgraph1.test_sub
        to_input: customers
  - node_from_sql_file: test.sql
    input_connections:
      - connect_table: testpy
        to_input: mytable_input
    output_names:
      - rename_output: ltv_table
        to: myltv_table
  - node_from_graph: subgraph1/graph.yml
# name: test_graph
# ports:
#   output_tables:
#     - myoutput_table
#   output_streams:
#     - myoutput_stream
#   input_table_slots:
#     - mynode/inputs/input1
#   input_stream_slots:
#     - othernode/inputs/input2
# nodes:
#   - python: nodefile.py
#   - component: webhook
#     name: webflow_lead_importer
#     # parameters:
#     #   batching_freq: hourly
#     # output_names: @webflow_leads_raw
#     # table_inputs:
#     #   - mytable
#     # stream_inputs:
#     #   - mystream
#   - component: path_to_importer
#     name: stripe_importer
#     parameters:
#         api_key: asdfasdfasdf
#         obejects:
#             - invoices_table
#             - charges_stream
#             # stripe_importer__invoices_table if not
#     output_stream_names:
#       charges_stream: @charges
#     output_table_names:
#       invoices_table: @invoices

#   - python: clean_raw_webflow_leads.py ## filename or python path clean_raw_webflow_leads
#   - sql: node3.sql
