name: test-basic-math
nodes:
  # Random source
  - node_file: random_source_ints/random_source_ints.py
  # Aggregator
  - node_file: aggregator/aggregator.py
    inputs:
      - random_ints -> input_stream
    outputs:
      - output_table -> random_ints_table
  # Random source floats
  - node_file: random_source_floats/random_source_floats.py
  # Aggregator
  - node_file: aggregator/aggregator.py
    inputs:
      - random_floats -> input_stream
    outputs:
      - output_table -> random_floats_table
  # Stripe import
  - node_package: basis_marketplace.stripe.import_stripe
    parameters:
      api_key: xxxxxxxxx
      resources:
        - charges
    outputs:
      - charges -> stripe_charges
  # Aggregator
  - node_file: aggregator/aggregator.py
    inputs:
      - stripe_charges -> input_stream
    outputs:
      - output_table -> stripe_charges_table
  # Summary
  - node_file: summary/summary.sql
  # LTV import
  - node_package: https://marketplace.getbasis.com/bi/customer_ltv
  # Consolidate floats
  - node_package: consolidate
    name: conslidate_floats
    inputs:
      - random_floats
    outputs:
      - random_floats_consolidated
  # Consolidate ints
  - node_package: consolidate
    name: conslidate_ints
    inputs:
      - random_ints
    outputs:
      - random_ints_consolidated
